{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "My Lists" %} â€” LingoList{% endblock %}

{% block meta_robots %}noindex,nofollow{% endblock %}

{% block content %}
<div class="container">
    <div class="list-header">
        <h1>{% trans "My Lists" %}</h1>
        <div class="list-header-actions">
            {% if has_archived %}
            <a href="{% url 'lists:list_archived' %}" class="btn btn-outline btn-sm">{% trans "Archived" %}</a>
            {% endif %}
            <a href="{% url 'lists:list_create' %}" class="btn btn-primary">{% trans "New list" %}</a>
        </div>
    </div>

    {% if lists %}
        {% for lst in lists %}
        <div class="list-card-wrapper">
            <form method="post" action="{% url 'lists:list_pin_toggle' pk=lst.pk %}" class="pin-form">
                {% csrf_token %}
                <button type="submit" class="pin-btn {% if lst.is_pinned %}pinned{% endif %}" title="{% if lst.is_pinned %}{% trans 'Unpin list' %}{% else %}{% trans 'Pin list' %}{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="{% if lst.is_pinned %}currentColor{% else %}none{% endif %}" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L12 12M12 12L8 8M12 12L16 8M5 21L5 14C5 12.8954 5.89543 12 7 12L17 12C18.1046 12 19 12.8954 19 14L19 21" transform="rotate(45 12 12)"/>
                    </svg>
                </button>
            </form>
            <a href="{% url 'lists:list_detail' pk=lst.pk %}" class="card list-card">
                <div>
                    <p class="list-card-title">
                        {% if lst.is_pinned %}<span class="pin-indicator">ðŸ“Œ</span>{% endif %}
                        {{ lst.title }}
                    </p>
                    <p class="list-card-meta">
                        {% blocktrans count counter=lst.items.count %}{{ counter }} item{% plural %}{{ counter }} items{% endblocktrans %}
                        &middot;
                        {% blocktrans with time=lst.updated_at|timesince %}Updated {{ time }} ago{% endblocktrans %}
                        {% if lst.owner != request.user %}
                            &middot; {% blocktrans with owner=lst.owner %}shared by {{ owner }}{% endblocktrans %}
                        {% endif %}
                    </p>
                </div>
                <span class="list-card-arrow">&rsaquo;</span>
            </a>
            {% if lst.owner == request.user %}
            <form method="post" action="{% url 'lists:list_archive_toggle' pk=lst.pk %}" class="archive-form">
                {% csrf_token %}
                <button type="submit" class="archive-btn" title="{% trans 'Archive list' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="21 8 21 21 3 21 3 8"></polyline>
                        <rect x="1" y="3" width="22" height="5"></rect>
                        <line x1="10" y1="12" x2="14" y2="12"></line>
                    </svg>
                </button>
            </form>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <p>{% trans "You don't have any lists yet." %}</p>
            <a href="{% url 'lists:list_create' %}" class="btn btn-primary">{% trans "Create your first list" %}</a>
        </div>
    {% endif %}
</div>
{% endblock %}
